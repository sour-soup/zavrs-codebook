What you basically do is the following: imagine you have already processed some points, the closest distance you have encountered is $d$. Now add the next point. How to check if it's closer than $d$ to any of the previous ones? Divide the plane into squares with side $d$. Now any point that is closer than $d$ can only lie in the neighboring by at least corner or the same square as the current one. No square contains more than $4$ points. So you can iterate over everything and check. If nothing is closer then skip it. Otherwise, add it and rebuild the entire structure. If you shuffle the points before processing then the expected number of operations is $\sum_{i=0}^{n-1} f(i) \cdot \frac{1}{i}$, where $f(i)$ is the time of rebuilding the prefix of length $i$ and $\frac{1}{i}$ is the probability that point $i$ will update the answer. So it's basically linear.